SEARCH PROTOCOL (v1.1)
=======================

1. SEARCH CLASSIFICATION:
   - Level 1: Quick Web Search (DuckDuckGo generic)
   - Level 2: Business Registry Search (YouControl, Opendatabot, Clarity)
   - Level 3: Open Data Portal Search (data.gov.ua)
   - Level 4: Headless Browser Scraping (Puppeteer - default for speed)
   - Level 5: Deep DOM/Protocol Interaction (Chrome-DevTools - for persistence, auth, and debugging)
   - Level 6: Technical Documentation & Library Search (context7)

2. BROWSER TOOL SELECTION:
   - **duckduckgo-search**: Use for rapid factual lookups without navigating full pages.
   - **puppeteer**: Use for standard web scraping, navigating SPAs, and basic interaction. Fastest browser option.
   - **chrome-devtools**: Use for high-precision tasks: capturing console logs, monitoring network traffic, bypass attempts, or when extreme DOM stability is needed.
   - **macos-use**: Use for NATIVE browser interactions (managing tabs, reading URLs) or when visual/GUI verification is the primary goal.

3. EXECUTION GUIDELINES:
   - START with specialized tools (Level 2/3) for technical data (ЄДРПОУ, addresses, owners).
   - PREFER macos-use_fetch_url for clean data extraction from articles/registries.
   - USE Puppeteer/DevTools ONLY for interactive pages (clicks, forms, dynamic content).
   - IF BLOCKED by robot detection, switch to Chrome-DevTools for more human-like emulation or use macos-use to manually guide.

3. DATA RETENTION:
   - All found datasets (.csv, .xlsx, .json) MUST be saved to the workspace folder.
   - Extract key "seed" metadata (dates, IDs, names) to the Knowledge Graph to enable recursive searching.

4. RECURSIVE SEARCH DOCTRINE:
   - After finding initial data, ALWAYS analyze if more precise terms (IDs, names) can be used for a second, deeper search.

5. OFFICIAL SOURCE DIRECTIVE:
   - Whenever possible, PRIORITIZE official instructions, manuals, or API documentation for the systems you are searching.
   - USE these official sources to refine your search queries and data extraction logic (e.g. finding hidden API endpoints or specific URL patterns).

6. SEMANTIC CHAINING DIRECTIVE:
   - Upon finding a new dataset, ALWAYS analyze column names for potential "join keys" (IDs, names, emails).
   - USE `trace_data_chain` to recursively reconstruct a complete profile from fragmented sources if you identify a semantic anchor.
   - If a link is found, DOCUMENT it in the Knowledge Graph for future automated discovery.

7. MACHINE-READABLE CONFIGURATION (JSON):
{
  "search_rules": {
    "business": {
      "operator": "(site:youcontrol.com.ua OR site:opendatabot.ua OR site:clarity-project.info) \"{query}\"",
      "priority_domains": ["youcontrol.com.ua", "opendatabot.ua", "clarity-project.info"]
    },
    "open_data": {
      "operator": "site:data.gov.ua \"{query}\" filetype:csv OR filetype:xlsx OR filetype:json",
      "priority_domains": ["data.gov.ua"]
    },
    "structured_data": {
      "operator": "site:data.gov.ua \"{query}\" filetype:csv OR filetype:xlsx OR filetype:json",
      "priority_domains": ["data.gov.ua"]
    }
  }
}

DEVIATION POLICY (ROOM TO MANEUVER)
===================================
- VECTOR GUIDANCE: Search levels are a "starting vector". You are encouraged to skip levels or pivot search strategies immediately if your intuition (or initial results) suggests a better path.
- AUTONOMY: Professional search quality and GOAL achievement always override rigid adherence to protocol hierarchy.
