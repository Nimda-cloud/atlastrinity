E402 Module level import not at top of file
  --> src/brain/core/server/server.py:29:1
   |
28 | # Local application imports
29 | from src.brain.config.config_loader import config
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
30 | from src.brain.core.services.services_manager import ServiceStatus
31 | from src.brain.mcp.mcp_manager import mcp_manager
   |

E402 Module level import not at top of file
  --> src/brain/core/server/server.py:30:1
   |
28 | # Local application imports
29 | from src.brain.config.config_loader import config
30 | from src.brain.core.services.services_manager import ServiceStatus
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
31 | from src.brain.mcp.mcp_manager import mcp_manager
32 | from src.brain.monitoring import get_monitoring_system
   |

E402 Module level import not at top of file
  --> src/brain/core/server/server.py:31:1
   |
29 | from src.brain.config.config_loader import config
30 | from src.brain.core.services.services_manager import ServiceStatus
31 | from src.brain.mcp.mcp_manager import mcp_manager
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
32 | from src.brain.monitoring import get_monitoring_system
33 | from src.brain.monitoring.logger import logger
   |

E402 Module level import not at top of file
  --> src/brain/core/server/server.py:32:1
   |
30 | from src.brain.core.services.services_manager import ServiceStatus
31 | from src.brain.mcp.mcp_manager import mcp_manager
32 | from src.brain.monitoring import get_monitoring_system
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
33 | from src.brain.monitoring.logger import logger
34 | from src.brain.monitoring.watchdog import watchdog
   |

E402 Module level import not at top of file
  --> src/brain/core/server/server.py:33:1
   |
31 | from src.brain.mcp.mcp_manager import mcp_manager
32 | from src.brain.monitoring import get_monitoring_system
33 | from src.brain.monitoring.logger import logger
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
34 | from src.brain.monitoring.watchdog import watchdog
35 | from src.brain.voice.stt import WhisperSTT
   |

E402 Module level import not at top of file
  --> src/brain/core/server/server.py:34:1
   |
32 | from src.brain.monitoring import get_monitoring_system
33 | from src.brain.monitoring.logger import logger
34 | from src.brain.monitoring.watchdog import watchdog
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
35 | from src.brain.voice.stt import WhisperSTT
   |

E402 Module level import not at top of file
  --> src/brain/core/server/server.py:35:1
   |
33 | from src.brain.monitoring.logger import logger
34 | from src.brain.monitoring.watchdog import watchdog
35 | from src.brain.voice.stt import WhisperSTT
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
36 |
37 | # Type hints for static type checking
   |

E402 Module level import not at top of file
  --> src/brain/core/server/server.py:46:1
   |
45 | # Import Trinity after all other imports to avoid circular imports
46 | from src.brain.core.orchestration.orchestrator import Trinity
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
47 |
48 | # Force UTF-8 encoding for stdout/stderr to support Ukrainian characters in terminal
   |

E402 Module level import not at top of file
   --> src/brain/core/server/server.py:705:1
    |
703 | # =============================================================================
704 |
705 | from src.brain.navigation.map_state import map_state_manager
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |

F403 `from src.brain.core.server.server import *` used; unable to detect undefined names
  --> src/brain/server.py:19:5
   |
17 |     main()
18 | else:
19 |     from src.brain.core.server.server import *
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/maintenance/clear_experience_fixed.py:18:1
   |
16 | sys.path.insert(0, str(project_root))
17 |
18 | from sqlalchemy import text
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^
19 |
20 | from src.brain.config import CONFIG_ROOT
   |

E402 Module level import not at top of file
  --> src/maintenance/clear_experience_fixed.py:20:1
   |
18 | from sqlalchemy import text
19 |
20 | from src.brain.config import CONFIG_ROOT
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
21 | from src.brain.memory import long_term_memory
22 | from src.brain.memory.db.manager import db_manager
   |

E402 Module level import not at top of file
  --> src/maintenance/clear_experience_fixed.py:21:1
   |
20 | from src.brain.config import CONFIG_ROOT
21 | from src.brain.memory import long_term_memory
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
22 | from src.brain.memory.db.manager import db_manager
   |

E402 Module level import not at top of file
  --> src/maintenance/clear_experience_fixed.py:22:1
   |
20 | from src.brain.config import CONFIG_ROOT
21 | from src.brain.memory import long_term_memory
22 | from src.brain.memory.db.manager import db_manager
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/maintenance/debug_db.py:12:1
   |
10 |     sys.path.insert(0, PROJECT_ROOT)
11 |
12 | from src.brain.db.manager import db_manager
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
13 | from src.brain.db.schema import TaskStep, ToolExecution
   |

E402 Module level import not at top of file
  --> src/maintenance/debug_db.py:13:1
   |
12 | from src.brain.db.manager import db_manager
13 | from src.brain.db.schema import TaskStep, ToolExecution
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
14 |
15 | # Ensure CONFIG_ROOT is set correctly
   |

E402 Module level import not at top of file
  --> src/maintenance/diagnostics.py:9:1
   |
 7 |     sys.path.insert(0, str(PROJECT_ROOT))
 8 |
 9 | from sqlalchemy import func, select
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
10 |
11 | from src.brain.memory.db.manager import db_manager
   |

E402 Module level import not at top of file
  --> src/maintenance/diagnostics.py:11:1
   |
 9 | from sqlalchemy import func, select
10 |
11 | from src.brain.memory.db.manager import db_manager
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
12 | from src.brain.memory.db.schema import AgentMessage, Session, Task, TaskStep, ToolExecution
13 | from src.brain.memory.memory import long_term_memory
   |

E402 Module level import not at top of file
  --> src/maintenance/diagnostics.py:12:1
   |
11 | from src.brain.memory.db.manager import db_manager
12 | from src.brain.memory.db.schema import AgentMessage, Session, Task, TaskStep, ToolExecution
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
13 | from src.brain.memory.memory import long_term_memory
   |

E402 Module level import not at top of file
  --> src/maintenance/diagnostics.py:13:1
   |
11 | from src.brain.memory.db.manager import db_manager
12 | from src.brain.memory.db.schema import AgentMessage, Session, Task, TaskStep, ToolExecution
13 | from src.brain.memory.memory import long_term_memory
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/maintenance/diagram_sync.py:14:1
   |
12 | sys.path.insert(0, str(PROJECT_ROOT / "src"))
13 |
14 | from brain.mcp_manager import MCPManager
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/maintenance/mcp_self_analyze.py:31:1
   |
29 | PROJECT_ROOT = Path(__file__).resolve().parent.parent.parent
30 | sys.path.insert(0, str(PROJECT_ROOT))
31 | from src.brain.config.config_loader import config
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
32 | from src.providers.factory import create_llm
   |

E402 Module level import not at top of file
  --> src/maintenance/mcp_self_analyze.py:32:1
   |
30 | sys.path.insert(0, str(PROJECT_ROOT))
31 | from src.brain.config.config_loader import config
32 | from src.providers.factory import create_llm
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/maintenance/swift_bridge_validator.py:18:1
   |
16 | """
17 |
18 | import asyncio
   | ^^^^^^^^^^^^^^
19 | import json
20 | import os
   |

E402 Module level import not at top of file
  --> src/maintenance/swift_bridge_validator.py:19:1
   |
18 | import asyncio
19 | import json
   | ^^^^^^^^^^^
20 | import os
21 | import sys
   |

E402 Module level import not at top of file
  --> src/maintenance/swift_bridge_validator.py:20:1
   |
18 | import asyncio
19 | import json
20 | import os
   | ^^^^^^^^^
21 | import sys
22 | import time
   |

E402 Module level import not at top of file
  --> src/maintenance/swift_bridge_validator.py:21:1
   |
19 | import json
20 | import os
21 | import sys
   | ^^^^^^^^^^
22 | import time
23 | from pathlib import Path
   |

E402 Module level import not at top of file
  --> src/maintenance/swift_bridge_validator.py:22:1
   |
20 | import os
21 | import sys
22 | import time
   | ^^^^^^^^^^^
23 | from pathlib import Path
24 | from typing import Any
   |

E402 Module level import not at top of file
  --> src/maintenance/swift_bridge_validator.py:23:1
   |
21 | import sys
22 | import time
23 | from pathlib import Path
   | ^^^^^^^^^^^^^^^^^^^^^^^^
24 | from typing import Any
   |

E402 Module level import not at top of file
  --> src/maintenance/swift_bridge_validator.py:24:1
   |
22 | import time
23 | from pathlib import Path
24 | from typing import Any
   | ^^^^^^^^^^^^^^^^^^^^^^
25 |
26 | PROJECT_ROOT = Path(__file__).resolve().parent.parent.parent
   |

RUF005 Consider iterable unpacking instead of concatenation
   --> src/maintenance/system_fixer.py:175:32
    |
173 |             hooks_dir = git_dir / "hooks"
174 |             if hooks_dir.exists():
175 |                 subprocess.run(["chmod", "+x"] + list(map(str, hooks_dir.glob("*"))), check=False)
    |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
176 |
177 | if __name__ == "__main__":
    |
help: Replace with iterable unpacking

TRY203 Remove exception handler; error is immediately re-raised
   --> src/providers/copilot.py:454:17
    |
452 |                           payload,
453 |                       )
454 | /                 except Exception:
455 | |                     raise
    | |_________________________^
456 |
457 |                   if response.status_code == 400:
    |

TRY203 Remove exception handler; error is immediately re-raised
   --> src/providers/copilot.py:522:21
    |
521 |                           return self._process_json_result(retry_response.json(), messages)
522 | /                     except Exception:
523 | |                         # Re-raise original error if fallback fails
524 | |                         raise
    | |_____________________________^
525 |
526 |                   response.raise_for_status()
    |

E402 Module level import not at top of file
  --> src/testing/benchmark_atlas_models.py:8:1
   |
 6 | sys.path.insert(0, str(PROJECT_ROOT))
 7 |
 8 | from src.brain.core.orchestration.orchestrator import Trinity
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 9 | from src.brain.core.orchestration.tool_dispatcher import ToolDispatcher
10 | from src.brain.mcp.mcp_manager import mcp_manager
   |

E402 Module level import not at top of file
  --> src/testing/benchmark_atlas_models.py:9:1
   |
 8 | from src.brain.core.orchestration.orchestrator import Trinity
 9 | from src.brain.core.orchestration.tool_dispatcher import ToolDispatcher
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
10 | from src.brain.mcp.mcp_manager import mcp_manager
   |

E402 Module level import not at top of file
  --> src/testing/benchmark_atlas_models.py:10:1
   |
 8 | from src.brain.core.orchestration.orchestrator import Trinity
 9 | from src.brain.core.orchestration.tool_dispatcher import ToolDispatcher
10 | from src.brain.mcp.mcp_manager import mcp_manager
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/testing/check_step_3.py:8:1
   |
 6 | sys.path.insert(0, str(PROJECT_ROOT))
 7 |
 8 | from sqlalchemy import text
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^
 9 |
10 | from src.brain.memory.db.manager import db_manager
   |

E402 Module level import not at top of file
  --> src/testing/check_step_3.py:10:1
   |
 8 | from sqlalchemy import text
 9 |
10 | from src.brain.memory.db.manager import db_manager
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/testing/demo_google_reg.py:8:1
   |
 6 | sys.path.append(str(project_root))
 7 |
 8 | from src.brain.orchestrator import Trinity as Orchestrator
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 9 |
10 | from src.brain.mcp_manager import mcp_manager
   |

E402 Module level import not at top of file
  --> src/testing/demo_google_reg.py:10:1
   |
 8 | from src.brain.orchestrator import Trinity as Orchestrator
 9 |
10 | from src.brain.mcp_manager import mcp_manager
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/testing/mcp_sandbox.py:31:1
   |
29 | sys.path.insert(0, str(PROJECT_ROOT))
30 |
31 | from src.brain.config.config_loader import config
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
32 | from src.providers.factory import create_llm
   |

E402 Module level import not at top of file
  --> src/testing/mcp_sandbox.py:32:1
   |
31 | from src.brain.config.config_loader import config
32 | from src.providers.factory import create_llm
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/testing/run_logic_tests.py:13:1
   |
11 | sys.path.append(str(PROJECT_ROOT))
12 |
13 | from src.mcp_server.context_check import run_test_suite
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
 --> src/testing/scenario_google_reg.py:8:1
  |
6 | sys.path.append(str(PROJECT_ROOT))
7 |
8 | from src.brain.core.orchestration.orchestrator import Trinity as Orchestrator
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
9 | from src.brain.mcp.mcp_manager import mcp_manager
  |

E402 Module level import not at top of file
 --> src/testing/scenario_google_reg.py:9:1
  |
8 | from src.brain.core.orchestration.orchestrator import Trinity as Orchestrator
9 | from src.brain.mcp.mcp_manager import mcp_manager
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |

E402 Module level import not at top of file
  --> src/testing/smoke_test_memory.py:9:1
   |
 7 | sys.path.append(str(PROJECT_ROOT))
 8 |
 9 | from src.brain.memory.db.manager import db_manager
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
10 | from src.brain.memory.knowledge_graph import knowledge_graph
11 | from src.brain.memory.memory import long_term_memory
   |

E402 Module level import not at top of file
  --> src/testing/smoke_test_memory.py:10:1
   |
 9 | from src.brain.memory.db.manager import db_manager
10 | from src.brain.memory.knowledge_graph import knowledge_graph
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
11 | from src.brain.memory.memory import long_term_memory
   |

E402 Module level import not at top of file
  --> src/testing/smoke_test_memory.py:11:1
   |
 9 | from src.brain.memory.db.manager import db_manager
10 | from src.brain.memory.knowledge_graph import knowledge_graph
11 | from src.brain.memory.memory import long_term_memory
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/testing/test_all_macos_tools.py:9:1
   |
 7 | sys.path.insert(0, str(project_root))
 8 |
 9 | from src.brain.logger import logger
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
10 | from src.brain.mcp_manager import mcp_manager
   |

E402 Module level import not at top of file
  --> src/testing/test_all_macos_tools.py:10:1
   |
 9 | from src.brain.logger import logger
10 | from src.brain.mcp_manager import mcp_manager
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/testing/test_confirmation_flow.py:10:1
   |
 8 | sys.path.insert(0, str(PROJECT_ROOT))
 9 |
10 | from langchain_core.messages import HumanMessage
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
11 |
12 | from src.brain.agents.tetyana import StepResult
   |

E402 Module level import not at top of file
  --> src/testing/test_confirmation_flow.py:12:1
   |
10 | from langchain_core.messages import HumanMessage
11 |
12 | from src.brain.agents.tetyana import StepResult
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
13 | from src.brain.core.orchestration.orchestrator import SystemState, Trinity
   |

E402 Module level import not at top of file
  --> src/testing/test_confirmation_flow.py:13:1
   |
12 | from src.brain.agents.tetyana import StepResult
13 | from src.brain.core.orchestration.orchestrator import SystemState, Trinity
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/testing/test_dispatcher_sync.py:10:1
   |
 8 | sys.path.insert(0, str(PROJECT_ROOT))
 9 |
10 | from src.brain.core.orchestration.tool_dispatcher import ToolDispatcher
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/testing/test_factory_connection.py:8:1
   |
 6 | sys.path.insert(0, os.path.join(PROJECT_ROOT, "src"))
 7 |
 8 | from src.providers.factory import create_llm, get_provider_name  # type: ignore
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 9 |
10 | try:
   |

E402 Module level import not at top of file
  --> src/testing/test_new_macos_tools.py:8:1
   |
 6 | sys.path.insert(0, str(project_root))
 7 |
 8 | from src.brain.orchestrator import Trinity as Orchestrator
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 9 |
10 | from src.brain.logger import logger
   |

E402 Module level import not at top of file
  --> src/testing/test_new_macos_tools.py:10:1
   |
 8 | from src.brain.orchestrator import Trinity as Orchestrator
 9 |
10 | from src.brain.logger import logger
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
11 | from src.brain.mcp_manager import mcp_manager
   |

E402 Module level import not at top of file
  --> src/testing/test_new_macos_tools.py:11:1
   |
10 | from src.brain.logger import logger
11 | from src.brain.mcp_manager import mcp_manager
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/testing/test_phoenix_flow.py:9:1
   |
 7 | sys.path.append(str(PROJECT_ROOT))
 8 |
 9 | from unittest.mock import MagicMock
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
10 |
11 | # MOCK Dependencies before import
   |

E402 Module level import not at top of file
  --> src/testing/test_phoenix_flow.py:15:1
   |
13 | sys.modules["src.brain.mcp_manager"] = MagicMock()
14 |
15 | from src.brain.healing.recovery import recovery_manager
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
16 | from src.brain.system_healing import HealingTask
   |

E402 Module level import not at top of file
  --> src/testing/test_phoenix_flow.py:16:1
   |
15 | from src.brain.healing.recovery import recovery_manager
16 | from src.brain.system_healing import HealingTask
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/testing/test_vibe_full.py:11:1
   |
 9 |   sys.path.append(str(PROJECT_ROOT))
10 |
11 | / from src.mcp_server.vibe_server import (
12 | |     run_vibe_subprocess,
13 | |     vibe_ask,
14 | |     vibe_code_review,
15 | |     vibe_get_config,
16 | |     vibe_implement_feature,
17 | |     vibe_smart_plan,
18 | |     vibe_test_in_sandbox,
19 | |     vibe_which,
20 | | )
   | |_^
21 |
22 |   # Setup Logging
   |

E402 Module level import not at top of file
 --> src/testing/test_vibe_thoughts.py:9:1
  |
7 | sys.path.append(str(PROJECT_ROOT))
8 |
9 | from src.mcp_server.vibe_server import run_vibe_subprocess
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |

E402 Module level import not at top of file
  --> src/testing/test_watchdog.py:11:1
   |
 9 |     sys.path.insert(0, str(PROJECT_ROOT))
10 |
11 | from src.brain.monitoring.watchdog import watchdog
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/testing/test_windsurf_free_models.py:24:1
   |
22 |     sys.path.insert(0, PROJECT_ROOT)
23 |
24 | from langchain_core.messages import HumanMessage, SystemMessage
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
25 |
26 | from src.providers.windsurf import WindsurfLLM, _detect_language_server, _ls_heartbeat
   |

E402 Module level import not at top of file
  --> src/testing/test_windsurf_free_models.py:26:1
   |
24 | from langchain_core.messages import HumanMessage, SystemMessage
25 |
26 | from src.providers.windsurf import WindsurfLLM, _detect_language_server, _ls_heartbeat
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
27 |
28 | # Free models to test
   |

E402 Module level import not at top of file
  --> src/testing/test_windsurf_provider.py:23:1
   |
21 | # load_dotenv()
22 |
23 | from langchain_core.messages import HumanMessage, SystemMessage
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
24 |
25 | from src.providers.windsurf import WindsurfLLM, _detect_language_server, _ls_heartbeat
   |

E402 Module level import not at top of file
  --> src/testing/test_windsurf_provider.py:25:1
   |
23 | from langchain_core.messages import HumanMessage, SystemMessage
24 |
25 | from src.providers.windsurf import WindsurfLLM, _detect_language_server, _ls_heartbeat
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/testing/verify_db_tables.py:14:1
   |
12 |     sys.path.insert(0, str(PROJECT_ROOT))
13 |
14 | from sqlalchemy import func, select
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
15 |
16 | from src.brain.memory.db.manager import db_manager
   |

E402 Module level import not at top of file
  --> src/testing/verify_db_tables.py:16:1
   |
14 | from sqlalchemy import func, select
15 |
16 | from src.brain.memory.db.manager import db_manager
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
17 | from src.brain.memory.db.schema import Base
   |

E402 Module level import not at top of file
  --> src/testing/verify_db_tables.py:17:1
   |
16 | from src.brain.memory.db.manager import db_manager
17 | from src.brain.memory.db.schema import Base
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/testing/verify_environment.py:22:1
   |
20 |     sys.path.insert(0, str(PROJECT_ROOT))
21 |
22 | import dotenv
   | ^^^^^^^^^^^^^
23 | import yaml
   |

E402 Module level import not at top of file
  --> src/testing/verify_environment.py:23:1
   |
22 | import dotenv
23 | import yaml
   | ^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/testing/verify_filesystem.py:9:1
   |
 7 | sys.path.insert(0, str(project_root))
 8 |
 9 | from src.brain.logger import logger
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
10 | from src.brain.mcp_manager import mcp_manager
   |

E402 Module level import not at top of file
  --> src/testing/verify_filesystem.py:10:1
   |
 9 | from src.brain.logger import logger
10 | from src.brain.mcp_manager import mcp_manager
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/testing/verify_golden_fund.py:21:1
   |
20 | # Adjust imports to match MCP server structure
21 | from src.mcp_server.golden_fund.lib.storage.blob import BlobStorage
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
22 | from src.mcp_server.golden_fund.lib.storage.vector import VectorStorage
23 | from src.mcp_server.golden_fund.lib.transformer import DataTransformer
   |

E402 Module level import not at top of file
  --> src/testing/verify_golden_fund.py:22:1
   |
20 | # Adjust imports to match MCP server structure
21 | from src.mcp_server.golden_fund.lib.storage.blob import BlobStorage
22 | from src.mcp_server.golden_fund.lib.storage.vector import VectorStorage
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
23 | from src.mcp_server.golden_fund.lib.transformer import DataTransformer
   |

E402 Module level import not at top of file
  --> src/testing/verify_golden_fund.py:23:1
   |
21 | from src.mcp_server.golden_fund.lib.storage.blob import BlobStorage
22 | from src.mcp_server.golden_fund.lib.storage.vector import VectorStorage
23 | from src.mcp_server.golden_fund.lib.transformer import DataTransformer
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
24 |
25 | # Configure logging
   |

E402 Module level import not at top of file
  --> src/testing/verify_learning.py:8:1
   |
 6 | sys.path.append(str(project_root))
 7 |
 8 | from src.brain.core.orchestration.orchestrator import Trinity as Orchestrator
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 9 | from src.brain.mcp.mcp_manager import mcp_manager
10 | from src.brain.memory.memory import long_term_memory
   |

E402 Module level import not at top of file
  --> src/testing/verify_learning.py:9:1
   |
 8 | from src.brain.core.orchestration.orchestrator import Trinity as Orchestrator
 9 | from src.brain.mcp.mcp_manager import mcp_manager
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
10 | from src.brain.memory.memory import long_term_memory
   |

E402 Module level import not at top of file
  --> src/testing/verify_learning.py:10:1
   |
 8 | from src.brain.core.orchestration.orchestrator import Trinity as Orchestrator
 9 | from src.brain.mcp.mcp_manager import mcp_manager
10 | from src.brain.memory.memory import long_term_memory
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

F811 Redefinition of unused `mcp_manager` from line 9
  --> src/testing/verify_learning.py:36:39
   |
34 |     await orchestrator.initialize()
35 |
36 |     from src.brain.mcp_manager import mcp_manager
   |                                       ^^^^^^^^^^^ `mcp_manager` redefined here
37 |
38 |     try:
   |
  ::: src/testing/verify_learning.py:9:39
   |
 8 | from src.brain.core.orchestration.orchestrator import Trinity as Orchestrator
 9 | from src.brain.mcp.mcp_manager import mcp_manager
   |                                       ----------- previous definition of `mcp_manager` here
10 | from src.brain.memory.memory import long_term_memory
   |
help: Remove definition: `mcp_manager`

E402 Module level import not at top of file
  --> src/testing/verify_macos_use_integration.py:8:1
   |
 6 | sys.path.insert(0, str(project_root))
 7 |
 8 | from src.brain.agents.tetyana import Tetyana
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 9 | from src.brain.logger import logger
10 | from src.brain.mcp_manager import mcp_manager
   |

E402 Module level import not at top of file
  --> src/testing/verify_macos_use_integration.py:9:1
   |
 8 | from src.brain.agents.tetyana import Tetyana
 9 | from src.brain.logger import logger
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
10 | from src.brain.mcp_manager import mcp_manager
   |

E402 Module level import not at top of file
  --> src/testing/verify_macos_use_integration.py:10:1
   |
 8 | from src.brain.agents.tetyana import Tetyana
 9 | from src.brain.logger import logger
10 | from src.brain.mcp_manager import mcp_manager
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/testing/verify_mcp_integrity.py:15:1
   |
13 | sys.path.insert(0, os.path.join(PROJECT_ROOT, "src"))
14 |
15 | from brain.mcp_manager import mcp_manager
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/testing/verify_self_healing_config.py:10:1
   |
 9 | # Force load setup_dev to set environment if needed (or just ensure PYTHONPATH)
10 | from src.brain.behavior.behavior_engine import behavior_engine
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
11 | from src.brain.core.orchestration.error_router import error_router
   |

E402 Module level import not at top of file
  --> src/testing/verify_self_healing_config.py:11:1
   |
 9 | # Force load setup_dev to set environment if needed (or just ensure PYTHONPATH)
10 | from src.brain.behavior.behavior_engine import behavior_engine
11 | from src.brain.core.orchestration.error_router import error_router
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/testing/verify_storage.py:11:1
   |
 9 |     sys.path.insert(0, str(PROJECT_ROOT))
10 |
11 | from src.brain.config.config_loader import config
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
12 | from src.brain.memory.db.manager import db_manager
   |

E402 Module level import not at top of file
  --> src/testing/verify_storage.py:12:1
   |
11 | from src.brain.config.config_loader import config
12 | from src.brain.memory.db.manager import db_manager
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
13 |
14 | # Use dynamic DB_URL
   |

E402 Module level import not at top of file
  --> src/testing/verify_storage.py:16:1
   |
14 |   # Use dynamic DB_URL
15 |   DB_URL = config.get("db.url", "sqlite+aiosqlite:///:memory:")
16 | / from src.brain.memory.db.schema import (
17 | |     ConversationSummary,
18 | |     KGNode,
19 | |     Session,
20 | |     Task,
21 | |     TaskStep,
22 | |     ToolExecution,
23 | | )
   | |_^
24 |   from src.brain.memory.memory import long_term_memory
   |

E402 Module level import not at top of file
  --> src/testing/verify_storage.py:24:1
   |
22 |     ToolExecution,
23 | )
24 | from src.brain.memory.memory import long_term_memory
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
 --> src/testing/verify_vibe.py:8:1
  |
6 | sys.path.insert(0, str(project_root))
7 |
8 | from src.brain.logger import logger
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
9 | from src.brain.mcp_manager import mcp_manager
  |

E402 Module level import not at top of file
 --> src/testing/verify_vibe.py:9:1
  |
8 | from src.brain.logger import logger
9 | from src.brain.mcp_manager import mcp_manager
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |

E402 Module level import not at top of file
  --> src/testing/verify_vibe_tools.py:23:1
   |
21 | logger = logging.getLogger("verify_vibe")
22 |
23 | from src.brain.mcp_manager import MCPManager
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
  --> src/tools/list_missing_tools.py:10:1
   |
 8 |     sys.path.insert(0, str(PROJECT_ROOT))
 9 |
10 | from src.brain.mcp.mcp_manager import mcp_manager
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |

E402 Module level import not at top of file
 --> src/tools/list_schemas.py:9:1
  |
7 | sys.path.insert(0, PROJECT_ROOT)
8 |
9 | from brain.mcp_manager import mcp_manager
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |

Found 97 errors.
No fixes available (1 hidden fix can be enabled with the `--unsafe-fixes` option).
