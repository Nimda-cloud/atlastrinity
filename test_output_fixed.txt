2026-02-14 15:57:47,985 - brain - INFO - [MEMORY] ChromaDB initialized at /Users/dev/.config/atlastrinity/memory/chroma
2026-02-14 15:57:48,008 - brain - INFO - [STATE] Redis connected via URL
2026-02-14 15:57:48,010 - brain - INFO - [MEMORY] Lessons: 0 | Strategies: 0 | Discoveries: 0
[VIBE_MCP] WARNING: [VIBE] AGENT_MODEL_OVERRIDE not set in config, strict configuration enforced
WARNING:vibe_mcp:[VIBE] AGENT_MODEL_OVERRIDE not set in config, strict configuration enforced
[VIBE_MCP] INFO: [VIBE] Server initialized | Binary: vibe | Workspace: /Users/dev/.config/atlastrinity/vibe_workspace | Timeout: 600.0s
INFO:vibe_mcp:[VIBE] Server initialized | Binary: vibe | Workspace: /Users/dev/.config/atlastrinity/vibe_workspace | Timeout: 600.0s
INFO:vibe_config:Loading Vibe config from: /Users/dev/Documents/GitHub/atlastrinity/.vibe/config.toml
[VIBE_MCP] INFO: [VIBE] Loaded configuration: active_model=calculator-expert
INFO:vibe_mcp:[VIBE] Loaded configuration: active_model=calculator-expert
[VIBE_MCP] ERROR: Database query error: object AsyncMock can't be used in 'await' expression
ERROR:vibe_mcp:Database query error: object AsyncMock can't be used in 'await' expression
F[VIBE_MCP] ERROR: Database query error: object AsyncMock can't be used in 'await' expression
ERROR:vibe_mcp:Database query error: object AsyncMock can't be used in 'await' expression
F.
======================================================================
FAIL: test_expected_files (__main__.TestVibeSmartDB.test_expected_files)
Test that expected_files generates the correct SQL.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/dev/.pyenv/versions/3.12.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dev/.pyenv/versions/3.12.12/lib/python3.12/asyncio/base_events.py", line 691, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/Users/dev/.pyenv/versions/3.12.12/lib/python3.12/unittest/mock.py", line 1413, in patched
    return await func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dev/Documents/GitHub/atlastrinity/tests/verify_vibe_smart.py", line 82, in test_expected_files
    self.assertTrue(res["success"])
AssertionError: False is not true

======================================================================
FAIL: test_raw_sql (__main__.TestVibeSmartDB.test_raw_sql)
Test that raw SQL is passed through correctly.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/dev/.pyenv/versions/3.12.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dev/.pyenv/versions/3.12.12/lib/python3.12/asyncio/base_events.py", line 691, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/Users/dev/.pyenv/versions/3.12.12/lib/python3.12/unittest/mock.py", line 1413, in patched
    return await func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dev/Documents/GitHub/atlastrinity/tests/verify_vibe_smart.py", line 51, in test_raw_sql
    self.assertTrue(res["success"])
AssertionError: False is not true

----------------------------------------------------------------------
Ran 3 tests in 0.008s

FAILED (failures=2)
DEBUG: vibe_check_db called with query='SELECT path, name, size, mtime FROM files WHERE path LIKE '%file.py' OR name = 'file.py' OR path LIKE '%other.md' OR name = 'other.md'', expected_files='['file.py', 'other.md']'
DEBUG expected_files result: {'success': False, 'error': "object AsyncMock can't be used in 'await' expression"}
DEBUG: vibe_check_db called with query='SELECT * FROM files', expected_files='None'
DEBUG raw_sql result: {'success': False, 'error': "object AsyncMock can't be used in 'await' expression"}
